/* --- Auto-hide sidebar top buttons --- */
@media (-moz-bool-pref: "rezen-auto.hide.top.buttons") {
    #zen-sidebar-top-buttons {
        /* Optimize transition: specify properties instead of 'all' for better performance */
        transition: margin-top 0.2s ease-in-out, margin-bottom 0.2s ease-in-out, opacity 0.2s ease-in-out !important;
        will-change: margin-top, opacity; /* Hint browser for GPU acceleration */
        margin-top: 0 !important;
    }

    #navigator-toolbox {
        #zen-sidebar-top-buttons:not(:hover):not(:has([open="true"])):has(toolbarbutton:not([hidden="true"])):not([customizing]) {
            margin-top: -23px !important;
            margin-bottom: 0 !important;
            opacity: 0 !important;
        }
    }
}